# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” !! ğŸ¥—
# intellij ë° visual studio code ì¼œë‘ì„¸ìš” !!

# ê¸ˆì¼ ìˆ˜ì—…
1. CRUD - back-front ì—°ê²° / CORS ì²˜ë¦¬     -> WebConfg.java
2. SpringBoot Security ì ìš©í•˜ê³  CRUD ì—°ê²° -> SecurityConfig.java
3. ê·¼ë° í„°ì ¸ì„œ 2 ë²ˆìœ¼ë¡œ default ë¡œê·¸ì¸ ì°½ / CRUD ì—°ê²°
4. OAuth2 ì—°ê²°
  - Googleì„ í†µí•´ì„œ ë¡œê·¸ì¸ì„ í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ì¸ì¦ ë°›ëŠ” ê³¼ì •

# ìˆ˜ì—… ì‹œì‘
- build.gradle spring security ê´€ë ¨ ì£¼ì„ ì‚­ì œ -> ì½”ë¼ë¦¬ -> ì‹¤í–‰
- í˜¹ì‹œ ì•ˆë˜ëŠ” ë¶„ë“¤ì€ TodoRepository ë¶€ë¶„ì— `<Todo, Long>`ì´ ë¹ ì ¸ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```java
public interface TodoRepository extends CrudRepository<Todo, Long>
```
  - ê·¸ë¦¬ê³  ì‹¤í–‰í•´ë³´ì„¸ìš”.
  - http://localhost:8080 ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ìë™ìœ¼ë¡œ endpointë¡œ /loginì´ ì ìš©ë˜ë©´ì„œ ë¡œê·¸ì¸ì°½ì´ defualtë¡œ ìƒê¹ë‹ˆë‹¤.
  - user / ì½˜ì†”ì°½ì—ì„œ í™•ì¸ ê°€ëŠ¥

  - whitelabel pageëŠ” ì§€ê¸ˆ ì‹ ê²½ì“°ì§€ ì•Šê² ìŠµë‹ˆë‹¤.

- src ë‚´ë¶€ì— config íŒ¨í‚¤ì§€ ìƒì„± -> SecurityConfig.java íŒŒì¼ ìƒì„± 

```java
package com.example.todo_backend_mariadb.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.HttpMethod;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.CorsConfigurationSource;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;


import java.util.Arrays;

@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        // corsConfigurationSource() ì´ê±° ë°‘ì— ì •ì˜í•˜ë‹ˆê¹Œ ë¹¨ê°›ê²Œ ëœ¨ëŠ”ê±° ì •ìƒì…ë‹ˆë‹¤.
        http.cors(cors -> cors.configurationSource(corsConfigurationSource()))
                .csrf(csrf -> csrf.disable())
                .sessionManagement(session ->
                        session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                .authorizeHttpRequests(authz ->
                        // preflight ìš”ì²­(OPTION ë©”ì„œë“œ)ì€ ì¸ì¦ ì—†ì´ ëª¨ë‘ í—ˆìš©
                        authz.requestMatchers(HttpMethod.OPTIONS, "/**").permitAll()
                                // í˜„ì¬ ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ ë”°ë¡œ ì—†ìœ¼ë¯€ë¡œ, ëª¨ë“  API ìš”ì²­ì„ ì„ì‹œë¡œ í—ˆìš©
                                .requestMatchers("/api/**").permitAll()
                                // í˜¹ì‹œ ëª°ë¼ì„œ ë‚˜ë¨¸ì§€ ëª¨ë“  ìš”ì²­ë„ ì¼ë‹¨ í—ˆìš©
                                .anyRequest().permitAll()
                );
        return http.build();
    }

    @Bean
    public CorsConfigurationSource corsConfigurationSource() {
        CorsConfiguration configuration = new CorsConfiguration();
        configuration.setAllowedOrigins(Arrays.asList("http://localhost:5173"));
        configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"));
        configuration.setAllowedHeaders(Arrays.asList("Authorization", "Cache-Control", "Content-Type"));
        configuration.setAllowCredentials(true);
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", configuration);
        return source;
    }
}
```
  - ì´ìƒê³¼ ê°™ì´ ì‘ì„± -> ê·¼ë° filterChainì€ í•„ìˆ˜ì ìœ¼ë¡œ ìš”êµ¬ë˜ê¸° ë•Œë¬¸ì— ë³µìŠµ ë° ì—°êµ¬ê°€ ìš”êµ¬ë©ë‹ˆë‹¤.

- application.properties í™•ì¸
  - ë°±ì—”ë“œì—ì„œ ë°ì´í„°ë¥¼ ìƒì„±(POST)í•˜ê±°ë‚˜ ìˆ˜ì •(PUT / PATCH)í–ˆì„ ë•Œ, ê·¸ ê²°ê³¼ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì—ê²Œ ì•Œë ¤ì£¼ë„ë¡ ì„¤ì •. ë§Œì•½ì— ì´ ë¶€ë¶„ì´ ë¹ ì§€ê²Œë˜ë©´ í”„ë¡ íŠ¸ì—”ë“œëŠ” ë°±ì—ì„œ ìƒì„±ëœ ë°ì´í„°ì˜ idë¥¼ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´í›„ì— ì¶©ëŒì´ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ì´ ìˆìŒ.

```application.properties
spring.data.rest.return-body-on-create=true
spring.data.rest.return-body-on-update=true
```

- ì´ì œ ì¬ì‹œì‘ì„ í–ˆì„ ë•Œ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ëœë‹¤ë©´ ì¼ë‹¨ ëª¨ë“  HTTP ë©”ì„œë“œ ìš”ì²­ì— ëŒ€í•œ í—ˆìš©ì´ ì ìš©ë˜ì–´ìˆëŠ” ë°±ì—”ë“œê°€ ì‘ì„±ëë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ê·¸ëŸ¬ë©´ ìˆ˜ì •ëœ ë°±ì—”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ React í”„ë¡œì íŠ¸ë¥¼ ë°±ì—”ë“œì™€ ì—°ê²°í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•œë°, ê¸°ì¡´ì— ë§Œë“¤ì–´ ë†¨ë˜(ì¦‰ í”„ë¡ íŠ¸ ìƒì—ì„œ êµ¬í˜„ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë˜) ë¶€ë¶„ë“¤ì„ ë°±ì—”ë“œì˜ ì—°ê²°ê³¼ ë§ê²Œ ëœ¯ì–´ê³ ì³ì•¼í•©ë‹ˆë‹¤.

- ì´ìƒì˜ ê³¼ì •ì—ì„œ ëŠë¼ê¸° ì‰¬ìš´ ë¶€ë¶„ì´ -> ì•„ë‹ˆ ê²°êµ­ ëœ¯ì–´ ê³ ì¹ ê±´ë° ì™œ ì´ë ‡ê²Œ ì§œë†¨ëƒ ê°€ ë  ìˆ˜ ìˆëŠ”ë°, êµ¬í˜„ ìì²´ë¥¼ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ë†“ê³  ë°±ê³¼ ì—°ê²°í•˜ê¸° ìœ„í•´ì„œë¼ê³  ìƒê°í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.

- ì—¬ëŸ¬ë¶„ì´ ìµìˆ™í•´ì§€ì‹œë©´ ì• ì´ˆì— ë°±-í”„ë¡ íŠ¸ë¥¼ ì™”ë‹¤ê°”ë‹¤í•˜ë©´ì„œ ì‘ì—…í•˜ì‹œëŠ” ê²ƒë„ ê°€ëŠ¥í• ê²ë‹ˆë‹¤.

```tsx
import './App.css'
import { useState } from 'react';
import type { Todo } from './types/Todo';
import TodoForm from "./components/TodoForm"
import {TodoList} from "./components/TodoList"
import { v4 as uuid } from 'uuid';

function App() {
  const [ todos, setTodos ] = useState<Todo[]>(() => {
    const storedTodos = localStorage.getItem('todos');
    return storedTodos ? JSON.parse(storedTodos): [];
  });

  const addTodo = (text: string) => {
    const newTodo: Todo = {
      id: uuid(),
      text,
      completed: false,
    }
    const updatedTodos = [ ...todos, newTodo ];
    console.log('updatedTodos --->', updatedTodos);
    setTodos(updatedTodos);
    localStorage.setItem('todos', JSON.stringify(updatedTodos));
  }

  const deleteTodo = (id: string) => {
    const updatedTodos = todos.filter((todo) => todo.id !== id);
    setTodos(updatedTodos);
    localStorage.setItem('todos', JSON.stringify(updatedTodos));
  } 

  const toggleComplete = (id: string) => {
    const updatedTodos = todos.map((todo) => todo.id === id ? {...todo, completed: !todo.completed } : todo );
    setTodos(updatedTodos);
    localStorage.setItem('todos', JSON.stringify(updatedTodos));
  }

  return (
    <div>
      <h1>ì‡¼í•‘ ë¦¬ìŠ¤íŠ¸</h1>
      <TodoForm onAddTodo={addTodo}/>
      <TodoList todos={todos} onToggleComplete={toggleComplete} onDeleteTodo={deleteTodo}/>
    </div>
  )
}

export default App
```

- ìˆ˜ì • ì „ì— ë§ˆì§€ë§‰ìœ¼ë¡œ í”„ë¡ íŠ¸ ìì²´ë§Œìœ¼ë¡œ êµ´ëŸ¬ê°€ë˜ í”„ë¡ íŠ¸ë¥¼ ê·¸ëƒ¥ ë³µë¶™í•´ë†¨ìŠµë‹ˆë‹¤.

ì´ì œ ìˆ˜ì •í• ê±´ë°, ì²« ë²ˆì§¸ -> types.tsì—ì„œ id: numberë¡œ ìˆ˜ì •

- src ë‚´ë¶€ì— services í´ë” ìƒì„± -> todoService.ts íŒŒì¼ ìƒì„±

- ë°±-í”„ë¡ íŠ¸ ì—°ê²°ì´ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.
  - ë°±ì—ì„œ ì •ë³´ë¥¼ ë°›ì•„ì™€ì„œ í”„ë¡ íŠ¸ì—ì„œ ë³´ì—¬ì£¼ê±°ë‚˜,
  - í”„ë¡ íŠ¸ì— ì…ë ¥í•œ ì •ë³´ë¥¼ ë°±ì— POST / PUT / PATCH / DELETEê°€ ì¼ì–´ë‚˜ì•¼í•©ë‹ˆë‹¤.
  - ê·¸ëŸ´ ë•Œ ì“°ëŠ” íŒ¨í‚¤ì§€ê°€ ë­ì˜€ë‚˜ìš”?
  - advanced-todo-appì—ì„œ í„°ë¯¸ë„ ì—´ê³  npm install axios


# HATEOAS(Hypermedia As The Engine Of Application State)
## ì •ì˜
REST ì•„í‚¤í…ì³ì˜ ì¤‘ìš”í•œ ì œì•½ ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœê°€ í•˜ì´í¼ë¯¸ë””ì–´(ë§í¬)ë¥¼ í†µí•´ ì „ì´ë˜ê³  ê²°ì •ë˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸
ì¦‰ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œë¶€í„° ë°›ì€ ì‘ë‹µì— í¬í•¨ëœ ë§í¬ë“¤ì„ í†µí•´ ë‹¤ìŒì— ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë™ì‘ì„ ë™ì ìœ¼ë¡œ íŒŒì•…í•  ìˆ˜ ìˆê²Œë” í•˜ê³ , APIì™€ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜

## í•µì‹¬ ê°œë…
ê¸°ì¡´ì˜ REST APIì˜ ê²½ìš°ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ íŠ¹ì • ê¸´ìœ¼ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” í•„ìš”í•œ URIë¥¼ ë¯¸ë¦¬ ì•Œê³  í•˜ë“œì½”ë”©ì„ í•´ì•¼í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•œ í›„ì— í•´ë‹¹ ì‚¬ìš©ìë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ `/users/{id}`ì™€ ê°™ì€ URIë¥¼ í´ë¼ì´ì–¸íŠ¸ ê°œë°œìê°€ ì§ì ‘ ì•Œê³  êµ¬ì„±í•´ì•¼í–ˆìŠµë‹ˆë‹¤(ì €í¬ëŠ” postmanì—ì„œ ë¹„ìŠ·í•˜ê²Œ í•´ë´¤ìŠµë‹ˆë‹¤, GV80 ìë™ì°¨ì˜ ìƒ‰ìƒì„ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” GET ìš”ì²­ìœ¼ë¡œ ì „ì²´ ìë™ì°¨ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  -> GV80ì˜ idë¥¼ ê¸°ì–µí•œ í›„ì— -> PATCH ìš”ì²­ì„ http://localhost:8080/api/cars/8 ë¡œ ë“¤ì–´ê°€ì„œ ìƒ‰ìƒì„ blackìœ¼ë¡œ ë°”ê¾¸ëŠ” ê³¼ì •ì„ ê±°ì³¤ì—ˆìŠµë‹ˆë‹¤).

ê·¼ë° HATEOASë¥¼ ì ìš©í•œ APIëŠ” ì‘ë‹µ ë°ì´í„°ì— ê´€ë ¨ëœ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë§í¬ê°€ ì• ì´ˆì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë§í¬ë“¤ì€ `rel`(relation) ì†ì„±ì„ í†µí•´ ì–´ë–¤ ì¢…ë¥˜ì˜ ë™ì‘ì¸ì§€ ì„¤ëª…í•˜ë©°, `href` ì†ì„±ìœ¼ë¡œ í•´ë‹¹ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” URIë¥¼ ëª…ì‹œí•´ì¤ë‹ˆë‹¤.

```json
// HATEOASê°€ ì ìš©ë˜ì§€ ì•Šì€ ì‘ë‹µ
{
  "id": 1,
  "name": "ê¹€ì¼",
  "email": "kim1@test.com",
}
// HATEOASê°€ ì ìš©ëœ ì‘ë‹µ
{
  "id": 1,
  "name": "ê¹€ì¼",
  "email": "kim1@test.com",
  "_links": {
    "self": {
      "href": "http://localhost:8080/users/1",
    },
    "edit": {
      "href": "http://localhost:8080/users/1/edit",
    },
    "delete": {
      "href": "http://localhost:8080/users/1",
    }
  }
}
```
ì´ìƒì˜ ì˜ˆì‹œì—ì„œ `_link` ê°ì²´ë¥¼ í†µí•´ì„œ ì´í•˜ì˜ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- self: í˜„ì¬ ë¦¬ì†ŒìŠ¤ì˜ URI
- edit: ì´ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” URI
- delete: ì´ ì‚¬ìš©ìë¥¼ ì‚­ì œí•  ìˆ˜ ìˆëŠ” URI  -> http ë©”ì„œë“œë§Œ deleteë¡œ ë°”ê¾¸ë©´ ë°”ë¡œ ê°€ëŠ¥í•˜ì£ .

## ì¥ì 
1. í´ë¼ì´ì–´íŠ¸-ì„œë²„ ê°„ì˜ ê²°í•©ë„ ê°ì†Œ - í´ë¼ì´ì–¸íŠ¸ê°€ ë”ì´ìƒ APIì˜ URI êµ¬ì¡°ë¥¼ ë¯¸ë¦¬ ì•Œ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤(ë’¤ì— /apiê°€ ë¶™ëŠ”ì§€ ì•ˆ ë¶™ëŠ”ì§€ ê¸°íƒ€ ë“±ë“±). ì„œë²„ì—ì„œ URIê°€ ë³€ê²½ë˜ë”ë¼ë„ `_link`ì— ì œê³µë˜ëŠ” ë§í¬ë§Œ ë”°ë¼ê°€ë©´ ë˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì˜ ìˆ˜ì • í•„ìš”ì„±ì´ í˜„ì €íˆ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤.

2. APIì˜ ìì²´ ì„¤ëª… ê¸°ëŠ¥ ê°•í™” - ì‘ë‹µì— í¬í•¨ëœ ë§í¬ë“¤ê³¼ `_link` ê°ì²´ì˜ í‚¤ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ API ì‚¬ìš©ë²•ì„ ì¢€ ë” ì‰½ê²Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì˜ì–´ë¡œ ë˜ì–´ìˆê¸°ëŠ” í•˜ì§€ë§Œ).

3. RESTful APIë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í¸ì˜ ì‚¬í•­ì„ ë§ì´ ì œê³µ

## ë‹¨ì 
1. HATEOASê°€ ìˆëŠ” ê²ƒê³¼ ì—†ëŠ” ê²ƒì„ ë´¤ì„ ë•Œ ì‘ë‹µ ë°ì´í„°ì˜ í¬ê¸° ì°¨ì´ê°€ ë§ì´ ë‚˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. êµ¬í˜„ìƒì˜ ë³µì¡ë„ ì¦ê°€ - ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ëª¨ë‘ ë§í¬ë¥¼ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì— ë™ì ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ êµ¬í˜„í•˜ëŠ” ë° ì¶”ê°€ì ì¸ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤({id}ì¸ì§€ idAsString ì–´ì©Œê³  í•´ì„œ lastIndexOf ì–´ì©Œê³ ë¥¼ í•´ì•¼í•˜ëŠ”ì§€ ë“±)

# URL vs. URI
URL(Uniform Resource Locator)     / í†µí•© ìì› ìœ„ì¹˜    - ìœ„ì¹˜(ì£¼ì†Œ)ë¥¼ ë‚˜íƒ€ëƒ„
URI(Uniform Resource Identifier)  / í†µí•© ìì› ì‹ë³„ì  - ì¸í„°ë„· ìƒì—ì„œì˜ ìì›ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„
ë¡œ, ì›¹ì—ì„œ ìì›(resource)ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì´ë¼ëŠ” ì¸¡ë©´ì—ì„œ ìœ ì‚¬í•©ë‹ˆë‹¤.
URIê°€ URLì„ í¬í•¨í•˜ëŠ” ìƒìœ„ ê°œë….

URIì˜ ê²½ìš°ì—ëŠ” ê³ ìœ í•œ ì‹ë³„ì´ ê°€ëŠ¥í•˜ê¸°ë§Œ í•˜ë©´ ë˜ëŠ” ë°˜ë©´ì—,
URLì€ ê·œì•½(í”„ë¡œí† ì½œ(http ë“±))ì„ í†µí•´ ì‹¤ì œ ìœ„ì¹˜ì— ë„ë‹¬í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

## ì˜ˆì‹œ
https://www.google.com/search?q=busan

- URL : https://www.google.com/search
  - https ë°©ì‹ìœ¼ë¡œ www.google.com ì´ë¼ëŠ” ì„œë²„ì— ì ‘ì†í•´ì„œ /searchë¼ëŠ” ê²½ë¡œì˜ ìì›ì„ ì°¾ì•„ê°€ë¼ëŠ” `ìœ„ì¹˜ ì •ë³´`ë¥¼ í‘œì‹œí•¨.
  - ê·¸ë˜ì„œ ì–˜ëŠ” URLì´ê¸°ë„ í•˜ë©´ì„œ URIì´ê¸°ë„ í•©ë‹ˆë‹¤.(ì¦‰ ëª¨ë“  URLì€ URIë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤)

- URI : https://www.google.com/search?q=busan
  - ì´ìƒì˜ ì£¼ì†ŒëŠ” q=busanì´ë¼ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ í¬í•¨í•˜ì—¬ 'busanì„ ê²€ìƒ‰í•œ ê²°ê³¼'ë¼ëŠ” íŠ¹ì • ìì›ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•©ë‹ˆë‹¤.
  - ë§Œì•½ q=seoulì´ë¼ë©´ ë‹¤ë¥¸ ìì›ì„ ì‹ë³„í•˜ê²Œ ë˜ë¯€ë¡œ URIë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ë° ì–˜ëŠ” URLì´ë¼ê³  í•˜ê¸°ì—ëŠ” ì• ë§¤í•œ ê°ì´ ìˆìŠµë‹ˆë‹¤. ì™œëƒë©´ ?q=busanì€ ìœ„ì¹˜ê°€ ì•„ë‹ˆë¼ ì‹ë³„ì„ ìœ„í•œ ì¶”ê°€ ì •ë³´ì— í•´ë‹¹í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.


- ê·¼ë° ì†”ì§íˆ í•œêµ­ì—ì„œëŠ” ì¢€ í˜¼ìš©í•´ì„œ ì“°ëŠ” ê²½ìš°ê°€ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤...

# ê³¼ì œ

postmanì—ì„œ ë°ì´í„° ì§‘ì–´ë„£ì„ ê²ƒ

- todoService.ts íŒŒì¼ ì™„ì„±í•˜ê¸°
- App.tsx íŒŒì¼ ì™„ì„±í•˜ê¸°

todoService.ts íŒŒì¼ê³¼ App.tsx íŒŒì¼ì„ ì™„ì„±í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ì„œ ë‘ ê°œì˜ todoê°€ ë‚˜ì˜¬ ìˆ˜ ìˆë„ë¡ ì‘ì„±í•˜ì‹œì˜¤.

postmanì—ì„œ POST ìš”ì²­ì„ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.
URLì„ ì ì ˆí•˜ê²Œ ì…ë ¥í•˜ê³  / POST ìš”ì²­ í•´ë‘ê³  / data - raw - JSON í˜•íƒœë¡œ
ê·¸ë¦¬ê³  JSON í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.
```json
{
  "text": "ì–´ì©Œê³ ",
  "completed": false
}
```
í•´ì„œ send ë³´ëƒˆì„ ë•Œ 200 OKê°€ ëœ¬ë‹¤ë©´ ì„±ê³µì´ë‹ˆê¹Œ ì´ê±¸ í•œ ë²ˆ ë” í•˜ì‹œë©´ ë˜ê² ë„¤ìš”.
ê·¸ë¦¬ê³  GET ìš”ì²­ì„ ë‚ ë ¸ì„ ë•Œ ë°©ê¸ˆ POST ìš”ì²­í•œ ê²ƒë“¤ì´ ì˜ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•˜ê³ ,

React í”„ë¡œì íŠ¸ ìƒì—ì„œ ìƒˆë¡ê³ ì¹¨ì„ í–ˆì„ ë•Œ ì œëŒ€ë¡œ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì´ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ê°€ ë‚¬ë‹¤ë©´ consoleì— ê²°ê³¼ê°€ ì €í¬ê°€ ì‘ì„±í•œ ëŒ€ë¡œ ë‚˜ì™€ìˆì„ í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤.

```ts
//todoService.ts
import axios from "axios";
import type { Todo } from "../types/Todo";

// .envì— ì“°ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— VITE_ë¡œ ì‹œì‘í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
const API_BASE_URL = 'http://localhost:8080/api';

// HATEOAS ì‘ë‹µ ë‚´ì˜ Todo ê°ì²´ íƒ€ì…
interface HateoasTodo {
  text: string;
  completed: boolean;
  _links: { self: { href: string; }; };
}

// HATEOAS ì‘ë‹µì˜ ì „ì²´ êµ¬ì¡° íƒ€ì…
interface SpringDataRestResponse {
  _embedded?: { todos: HateoasTodo[]; };
}

// HATEOAS ê°ì²´ë¥¼ í”„ë¡ íŠ¸ ìƒì—ì„œ ì“¸ ìˆ˜ ìˆë„ë¡ ë¯¸ë¦¬ ë³€í™˜ì‹œí‚¤ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ë‘ê² ìŠµë‹ˆë‹¤.
const formatTodo = (hateoasTodo: HateoasTodo): Todo => {
  const selfHref = hateoasTodo._links.self.href;
  const idAsString = selfHref.substring(selfHref.lastIndexOf('/') + 1);
  return {
    id: parseInt(idAsString, 10),
    text: hateoasTodo.text,
    completed: hateoasTodo.completed,
  }
}

export const getAllTodos = async (): Promise<Todo[]> => {
  try {
    const response = await axios.get<SpringDataRestResponse>(`${API_BASE_URL}/todos`);
    const todosFromApi = response.data._embedded?.todos || [];
    return todosFromApi.map(formatTodo);
  } catch  (error) {
    console.log("Error fetching todos: ", error);
    throw error;
  }
};

export const addTodoApi = async (text: string): Promise<Todo> => {
  try {
    const response = await axios.post<HateoasTodo>(`${API_BASE_URL}/todos`, {
      text,
      completed: false,
    });
    return formatTodo(response.data);
  } catch (error) {
    console.log("Error adding todo: ", error);
    throw error;
  }
};

export const toggleTodoApi = async (id: number, completed: boolean): Promise<Todo> => {
  try {
    const response = await axios.patch<HateoasTodo>(`${API_BASE_URL}/todos/${id}`, {completed: !completed});
    return formatTodo(response.data);
  } catch (error) {
    console.log(`Error toggling todo ${id} : `, error);
    throw error;
  }
}

export const deleteTodoApi = async (id: number): Promise<void> => {
  try {
    await axios.delete(`${API_BASE_URL}/todos/${id}`);
  } catch (error) {
    console.log(`Error deleting todo ${id} : `, error);
    throw error;
  }
}
```

ì´ìƒì˜ ì½”ë“œë¡œ axiosë¥¼ í™œìš©, ë°±ì—”ë“œë¡œë¶€í„° ë°ì´í„°ë¥¼ ìƒì„±/ì½ê¸°/ìˆ˜ì •/ì‚­ì œí•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.
ì´ ë‹¤ìŒì€ ë°›ì•„ì˜¨ ë°ì´í„°ë“¤ì„ ê°€ì§€ê³  App.tsxì—ì„œ ì–´ë–»ê²Œ ì¡°ì‘í•˜ëŠ”ê°€ì™€ ê´€ë ¨ìˆìŠµë‹ˆë‹¤.

í˜„ì¬ App.tsxì˜ ê²½ìš°ì—ëŠ” useEffectë¥¼ ì¶”ê°€í•œ ê²ƒ ì´ì™¸ì— addTodo, deleteTodo ë“±ì˜ í•¨ìˆ˜ê°€ localStorage í˜•íƒœë¡œ ì‘ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ê²ƒì„ todoServiceì˜ í•¨ìˆ˜ë“¤ê³¼ ì—°ê²°ì‹œì¼œì•¼í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  C ëŠ” ë³„ë¡œ ìƒê´€ì—†ì—ˆì§€ë§Œ
UDíŒŒíŠ¸ì—ì„œëŠ” TodoList / TodoItem ì»´í¬ë„ŒíŠ¸ì™€ ê´€ë ¨ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ts -> App.tsx -> TodoList.tsx -> TodoItem.tsx ìˆœì„œëŒ€ë¡œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ íƒìƒ‰í•´ê°€ë©´ì„œ ìˆ˜ì •ì„ í•´ì¤˜ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤.

ê·¸ ë¶€ë¶„ì„ ì™„ë£Œì§€ìœ¼ë©´ CRUDì˜ back - front ì—°ê²°ì´ ì™„ë£Œë©ë‹ˆë‹¤.

ì´ìƒì˜ ê³¼ì •ì„ md íŒŒì¼ë¡œ ì •ë¦¬í•˜ëŠ” ê²ƒì€ ì—¬ëŸ¬ë¶„ë“¤ì´ ê¸°ëŠ¥ë³„ë¡œ ì´í•´í•˜ëŠ”ê°€ / í˜¹ì€ íŒŒì¼(ì»´í¬ë„ŒíŠ¸) ë³„ë¡œ ì´í•´í•˜ëŠ”ê°€ì— ë”°ë¼ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì •ë¦¬ ê³¼ì •ì„ ì œê°€ ëª…ì‹œí•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤.

ì—¬ëŸ¬ë¶„ë“¤ì´ ì§ì ‘ ê¸ˆì¼ ì‹œê°„ ì¤‘ì— ì½”ë“œë¥¼ í™•ì¸í•˜ê³  ë‚˜ë¦„ëŒ€ë¡œ ì •ë¦¬í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.

ê·¼ë° ì •ë¦¬ ì „ì— í˜„ì¬ê¹Œì§€ í•œ back - frontë¥¼ ë‘˜ ë‹¤ ì˜¬ë¦¬ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

íŒŒì¼ ì˜®ê¸°ì‹œê³ 

git init
git config user.name "ì—¬ëŸ¬ë¶„ê¹ƒí—ˆë¸Œì•„ì´ë””"
git configg user.email "ì—¬ëŸ¬ë¶„ê¹ƒí—ˆë¸Œ@ì´ë©”ì¼"
git add .
git commit -m "first commit"
