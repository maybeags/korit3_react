# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” !! ğŸ˜€

# ê¸ˆì¼ ìˆ˜ì—… ê³¼ì •
1. ì½”ë“œ ë¦¬íŒ©í† ë§
2. ìˆ˜ì • íŒŒíŠ¸ ì„¤ì • -> ë˜‘ê°™ì´ ëª¨ë‹¬ì°½ì´ ëœ¹ë‹ˆë‹¤.
  - íŠ¹ì • ì°¨ì— ì‚­ì œ ë²„íŠ¼ ë§Œë“  ê²ƒì²˜ëŸ¼ Edit ë²„íŠ¼ ë§Œë“¤ì–´ìš”.
  - ëª¨ë‹¬ ì°½ì´ ëœ¨ëŠ”ë°, ê·¸ê±´ ìƒì„± ë¶€ë¶„ì—ì„œ êµ¬í˜„í•œ ë°©ì‹ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í• ê²ë‹ˆë‹¤.
  - input ì°½ì— ê¸°ì¡´ ì°¨ì˜ ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ ë‚˜ì™€ìˆë„ë¡ í• ê²ë‹ˆë‹¤.
  - í•„ìš”í•œ ë¶€ë¶„ë§Œ ìˆ˜ì •ì„ í•˜ë©´, PUT ìš”ì²­ì„ ë³´ë‚´ë„ë¡ í• ê²ë‹ˆë‹¤.
  - DBê°€ ìˆ˜ì •ë˜ê³ , ë§ˆì°¬ê°€ì§€ë¡œ cacheì™€ ë‹¤ë¥¸ì§€ ì²´í¬í•´ì„œ ë¸Œë¼ìš°ì € ìµœì‹ í™”ë¥¼ í•˜ê²Œ ë ê²ë‹ˆë‹¤.

3. ì‡¼í•‘ë¦¬ìŠ¤íŠ¸ì—ì„œ í–ˆë˜ ê²ƒì²˜ëŸ¼ ëª‡ëª‡ HTML íƒœê·¸ë¥¼ muië¡œ ëŒ€ì²´í• ê²ë‹ˆë‹¤. Button / TextFieldë¡œ.
4. mui iconì„ ì ìš©

# Refactoring 
ê¸°ëŠ¥ì€ ë™ì¼í•˜ê²Œ ê°€ì ¸ê°€ë©´ì„œ ë‚´ë¶€ì˜ ë¡œì§ì„ ìˆ˜ì •(ê°œì„ )í•œ ë°©ì‹.

ìˆ˜ì • ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ C ì—ì„œ ë§Œë“¤ì—ˆë˜ ëª¨ë‹¬ì°½ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í• ê²ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ Cì—ì„œ ë§Œë“  ê±¸ ê·¸ëƒ¥ ctrl + c / v í•´ì„œ ë³µì‚¬ ë¶™ì—¬ë„£ê¸°í•œë‹¤ë©´ ë™ì¼í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ì½”ë“œê°€ ì¤‘ë³µì ìœ¼ë¡œ ì‚¬ìš©ë ê²ë‹ˆë‹¤. ê·¸ë˜ì„œ ì•„ì˜ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ ê·¸ê²ƒì„ Cì—ë„ ì“°ê³  Uì—ë„ ì“¸ ì˜ˆì •ì…ë‹ˆë‹¤.

TextFieldë¥¼ ìì²´ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„í• í•œ ë‹¤ìŒì— New Car / Edit í¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í• ê²ë‹ˆë‹¤.

components í´ë”ì— CarDialogContent.tsx ìƒì„±. -> ì´ˆê¸°í™”
í”„ë¡­ì„ ì´ìš©í•˜ì—¬ car ê°ì²´ì™€ handleChange í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ DialogFormPropsë¼ëŠ” ìƒˆë¡œìš´ ìë£Œí˜•ë„ ìƒì„±í• ê²ë‹ˆë‹¤.
ê·¼ë° ì–˜ëŠ” ëª¨ë‹¬(Dialog) ë‚´ì—ì„œë§Œ ì‚¬ìš©í• ê±°ë¼ types.tsì—ëŠ” ì“°ì§€ ì•Šì„ê²ë‹ˆë‹¤.

ì´ìƒì˜ ì§€ì‹œì‚¬í•­ì„ ì½”ë“œë¡œ êµ¬í˜„í•œ ê²ƒì´

```tsx
//CarDialogContent.tsx
import { Car } from "../types";

type DialogFormProps = {
  car: Car;
  handleChange: (event : React.ChangeEvent<HTMLInputElement>) => void;
}

export default function CarDialogContent({ car, handleChange } : DialogFormProps) {

  return (<></>);
}
```

ê·¸ë¦¬ê³  CarDialogContentì— AddCar ì»´í¬ë„ŒíŠ¸ì˜ `<DialogContent>` íƒœê·¸ ë¶€ë¶„ì„ ì „ì²´ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê³ ,
AddCarì—ì„œëŠ” DialogContent íƒœê·¸ë¥¼ ì „ì²´ ì‚­ì œí•©ë‹ˆë‹¤. ì´ë¥¼ CarDialogContentë¡œ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤.
ì˜ˆì‹œì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
ì£¼ì„ ë¶€ë¶„ì„ í’€ê³  ì‹¤í–‰ì‹œì¼œê°€ë©´ì„œ ë¹„êµí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

```tsx
// AddCar.tsx
import { Dialog, DialogActions, DialogContent, DialogTitle } from "@mui/material";
import { Car } from "../types";
import { useState } from "react";
import { useMutation, useQueryClient } from "@tanstack/react-query";
import { addCar } from "../api/carapi";
import CarDialogContent from "./CarDialogContet";

export default function AddCar() {
  const [ open, setOpen ] = useState(false);
  const [ car, setCar ] = useState<Car>({
    brand: '',
    model: '',
    color: '',
    registrationNumber: '',
    modelYear: 0,
    price: 0,
  });
  const queryClient = useQueryClient();

  const { mutate } = useMutation(addCar, {
    onSuccess: () => {
      queryClient.invalidateQueries(['cars']);
    },
    onError: (err) => console.log(err),
  });

  // ìë™ì°¨ë¥¼ ì €ì¥í•˜ê³  ëª¨ë‹¬ í¼ì„ ë‹«ì„ ìˆ˜ ìˆë„ë¡ í• ê²ë‹ˆë‹¤.
  const handleSave = () => {
    mutate(car);
    setCar({
      brand: '',
      model: '',
      color: '',
      registrationNumber: '',
      modelYear: 0,
      price: 0,
    });
    handleClose();
  }


  const handleClickOpen = () => setOpen(true);

  const handleClose = () => setOpen(false);

  const handleChange = (event : React.ChangeEvent<HTMLInputElement>) => 
  {
    setCar({...car, [event.target.name]: event.target.value})
  }
  
  return(
    <>
      <button onClick={handleClickOpen}>New Car</button>
      <Dialog open={open} onClose={handleClose}>
        <DialogTitle>New Car</DialogTitle>
        <CarDialogContent car={car} handleChange={handleChange} />

        {/* <DialogContent>
          <input placeholder="Brand" name="brand" value={car.brand} onChange={handleChange} /><br />
          <input placeholder="Model" name="model" value={car.model} onChange={handleChange} /><br />
          <input placeholder="Color" name="color" value={car.color} onChange={handleChange} /><br />
          <input placeholder="Reg.nr" name="registrationNumber" value={car.registrationNumber} onChange={handleChange} /><br />
          <input placeholder="Year" name="modelYear" value={car.modelYear} onChange={handleChange} /><br />
          <input placeholder="Price" name="price" value={car.price} onChange={handleChange} /><br />
        </DialogContent> */}
        <DialogActions>
          <button onClick={handleClose}>Cancel | ì·¨ì†Œ</button>
          <button onClick={handleSave}>Save | ì €ì¥</button>
        </DialogActions>
      </Dialog>
    </>
  );
}
```
