# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” ! ğŸ•ğŸ•
# ê¸ˆì¼ ìˆ˜ì—… ê³„íš
- ë¡œê·¸ì•„ì›ƒê¹Œì§€ ë§ˆë¬´ë¦¬í•˜ê³ ,
- SQLD ë° ì·¨ì—… ë‹´ë‹¹ìë‹˜ ì œì¶œìš© ì´ë ¥ì„œ ì™„ì„±


# JWT í¬í•¨í•œ í•¨ìˆ˜ ìˆ˜ì •
```ts
//carapi.ts
import axios from "axios";
import { CarResponse, Car, CarEntry } from "../types";

export const getCars = async (): Promise<CarResponse[]> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.get(`${import.meta.env.VITE_API_URL}/api/cars`, {
    headers: { 'Authorization': token }
  });

  return response.data._embedded.cars;
}

export const deleteCar = async (link: string): Promise<CarResponse> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.delete(link, {
    headers: { 'Authorization': token }
  });
  return response.data
}

export const addCar = async (car: Car) : Promise<CarResponse> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.post(`${import.meta.env.VITE_API_URL}/api/cars`, car, {
    headers: {
      'Content-Type': 'application/json',
      'Authorization': token,
    },
  });

  return response.data;
}

export const updateCar = async (carEntry : CarEntry) : Promise<CarResponse> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.put(carEntry.url, carEntry.car, {
    headers: {
      'Content-Type': 'application/json',
      'Authorization': token,
    },
  });

  return response.data;
}
```

ì´ìƒì—ì„œ jwtë¥¼ í¬í•¨í•˜ê³ , ê° ìš”ì²­ì„ ë³´ë‚¼ ë•Œì˜ axios.post/get/put/delete(arugment) ë³€í™”ì— ëŒ€í•œ ì°¨ì´ë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

# ì¤‘ë³µ ì½”ë“œ ë¦¬íŒ©í† ë§
ê·¸ë˜ì„œ ì´ìƒì˜ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ë©´ ì¼ë‹¨ CRUDê°€ ì „ë¶€ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ëŠ” ìˆëŠ”ë°, ì›ë¦¬ë¥¼ ë³´ë‹¤ë³´ë‹ˆê¹Œ ê²°êµ­ì€ sesstionStorageì—ì„œ getItemë©”ì„œë“œë¥¼ í†µí•´ jwtë¥¼ ê°€ì§€ê³  ì˜¤ê³ , ê·¸ê²ƒì„ `{'Authorization': jwt}` í˜•íƒœë¡œ ë‹´ì•„ì„œ ë³´ë‚´ëŠ” ë¶€ë¶„ì´ ì¤‘ë³µë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë¶€ë¶„ì„ ë¦¬íŒ©í† ë§í•˜ì—¬ ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ì„ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

1. sessionStorageì—ì„œ í† í°ì„ ê²€ìƒ‰í•˜ê³  í† í°ì´ í¬í•¨ëœ í—¤ë”ë¥¼ í¬í•¨í•˜ëŠ” Axios ìš”ì²­ì— ëŒ€í•œ config ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°€ì¥ ìœ„ì— ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.
  AxiosëŠ” Axiosë¥¼ ì´ìš©í•˜ì—¬ ì „ì†¡í•˜ëŠ” ìš”ì²­ì„ êµ¬ì„±í•˜ëŠ” ë° ì´ìš©í•  ìˆ˜ ìˆëŠ” AxiosRequestConfig ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì• ì´ˆì— 'Content-Type': 'application/json'ë„ ì ìš©í• ê²ë‹ˆë‹¤. ì½”ë“œ ì˜ˆì‹œëŠ” ì´í•˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```ts
//carapi.ts
import axios, { AxiosRequestConfig } from "axios";
import { CarResponse, Car, CarEntry } from "../types";

const getAxiosConfig = (): AxiosRequestConfig => {
  const token = sessionStorage.getItem('jwt');      // ê·¸ëŸ¼ ì–˜ ì§€ì—­ë³€ìˆ˜ì£ .

  return {
    headers: {
      'Authorization': token,
      'Content-Type': 'application/json',
    }
  }
}


export const getCars = async (): Promise<CarResponse[]> => {
  const response = await axios.get(`${import.meta.env.VITE_API_URL}/api/cars`, getAxiosConfig());

  return response.data._embedded.cars;
}

export const deleteCar = async (link: string): Promise<CarResponse> => {
  const response = await axios.delete(link, getAxiosConfig());
  return response.data
}

export const addCar = async (car: Car) : Promise<CarResponse> => {
  const response = await axios.post(`${import.meta.env.VITE_API_URL}/api/cars`, car, getAxiosConfig());

  return response.data;
}

export const updateCar = async (carEntry : CarEntry) : Promise<CarResponse> => {
  const response = await axios.put(carEntry.url, carEntry.car, getAxiosConfig());

  return response.data;
}
```

ì´ìƒì—ì„œ íŠ¹íˆ ì˜ë¬¸ì ì´ ë“œëŠ” ë¶€ë¶„ì´ getAxiosConfigì™€ getAxiosConfig()ì˜ ì°¨ì´ì ì¼ê²ë‹ˆë‹¤(ê·¼ë° ì‚¬ì‹¤ ì„¤ëª…í–ˆìŒ).

í•¨ìˆ˜ë¥¼ ì´ë¦„ë§Œìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ í•¨ìˆ˜ëª…()ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì˜ ì°¨ì´ì ì€ ì•ìœ¼ë¡œë„ ì—¬ëŸ¬ë¶„ë“¤ì—ê²Œ ë§ì€ ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ ê¼­ ê²€ìƒ‰í•´ë³´ì‹œê³  í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.