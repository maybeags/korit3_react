# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” ! ğŸ•ğŸ•
# ê¸ˆì¼ ìˆ˜ì—… ê³„íš
- ë¡œê·¸ì•„ì›ƒê¹Œì§€ ë§ˆë¬´ë¦¬í•˜ê³ ,
- SQLD ë° ì·¨ì—… ë‹´ë‹¹ìë‹˜ ì œì¶œìš© ì´ë ¥ì„œ ì™„ì„±


# JWT í¬í•¨í•œ í•¨ìˆ˜ ìˆ˜ì •
```ts
//carapi.ts
import axios from "axios";
import { CarResponse, Car, CarEntry } from "../types";

export const getCars = async (): Promise<CarResponse[]> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.get(`${import.meta.env.VITE_API_URL}/api/cars`, {
    headers: { 'Authorization': token }
  });

  return response.data._embedded.cars;
}

export const deleteCar = async (link: string): Promise<CarResponse> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.delete(link, {
    headers: { 'Authorization': token }
  });
  return response.data
}

export const addCar = async (car: Car) : Promise<CarResponse> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.post(`${import.meta.env.VITE_API_URL}/api/cars`, car, {
    headers: {
      'Content-Type': 'application/json',
      'Authorization': token,
    },
  });

  return response.data;
}

export const updateCar = async (carEntry : CarEntry) : Promise<CarResponse> => {
  const token = sessionStorage.getItem('jwt');
  const response = await axios.put(carEntry.url, carEntry.car, {
    headers: {
      'Content-Type': 'application/json',
      'Authorization': token,
    },
  });

  return response.data;
}
```

ì´ìƒì—ì„œ jwtë¥¼ í¬í•¨í•˜ê³ , ê° ìš”ì²­ì„ ë³´ë‚¼ ë•Œì˜ axios.post/get/put/delete(arugment) ë³€í™”ì— ëŒ€í•œ ì°¨ì´ë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

# ì¤‘ë³µ ì½”ë“œ ë¦¬íŒ©í† ë§
ê·¸ë˜ì„œ ì´ìƒì˜ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ë©´ ì¼ë‹¨ CRUDê°€ ì „ë¶€ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ëŠ” ìˆëŠ”ë°, ì›ë¦¬ë¥¼ ë³´ë‹¤ë³´ë‹ˆê¹Œ ê²°êµ­ì€ sesstionStorageì—ì„œ getItemë©”ì„œë“œë¥¼ í†µí•´ jwtë¥¼ ê°€ì§€ê³  ì˜¤ê³ , ê·¸ê²ƒì„ `{'Authorization': jwt}` í˜•íƒœë¡œ ë‹´ì•„ì„œ ë³´ë‚´ëŠ” ë¶€ë¶„ì´ ì¤‘ë³µë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë¶€ë¶„ì„ ë¦¬íŒ©í† ë§í•˜ì—¬ ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ì„ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

1. sessionStorageì—ì„œ í† í°ì„ ê²€ìƒ‰í•˜ê³  í† í°ì´ í¬í•¨ëœ í—¤ë”ë¥¼ í¬í•¨í•˜ëŠ” Axios ìš”ì²­ì— ëŒ€í•œ config ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°€ì¥ ìœ„ì— ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.
  AxiosëŠ” Axiosë¥¼ ì´ìš©í•˜ì—¬ ì „ì†¡í•˜ëŠ” ìš”ì²­ì„ êµ¬ì„±í•˜ëŠ” ë° ì´ìš©í•  ìˆ˜ ìˆëŠ” AxiosRequestConfig ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì• ì´ˆì— 'Content-Type': 'application/json'ë„ ì ìš©í• ê²ë‹ˆë‹¤. ì½”ë“œ ì˜ˆì‹œëŠ” ì´í•˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```ts
//carapi.ts
import axios, { AxiosRequestConfig } from "axios";
import { CarResponse, Car, CarEntry } from "../types";

const getAxiosConfig = (): AxiosRequestConfig => {
  const token = sessionStorage.getItem('jwt');      // ê·¸ëŸ¼ ì–˜ ì§€ì—­ë³€ìˆ˜ì£ .

  return {
    headers: {
      'Authorization': token,
      'Content-Type': 'application/json',
    }
  }
}


export const getCars = async (): Promise<CarResponse[]> => {
  const response = await axios.get(`${import.meta.env.VITE_API_URL}/api/cars`, getAxiosConfig());

  return response.data._embedded.cars;
}

export const deleteCar = async (link: string): Promise<CarResponse> => {
  const response = await axios.delete(link, getAxiosConfig());
  return response.data
}

export const addCar = async (car: Car) : Promise<CarResponse> => {
  const response = await axios.post(`${import.meta.env.VITE_API_URL}/api/cars`, car, getAxiosConfig());

  return response.data;
}

export const updateCar = async (carEntry : CarEntry) : Promise<CarResponse> => {
  const response = await axios.put(carEntry.url, carEntry.car, getAxiosConfig());

  return response.data;
}
```

ì´ìƒì—ì„œ íŠ¹íˆ ì˜ë¬¸ì ì´ ë“œëŠ” ë¶€ë¶„ì´ getAxiosConfigì™€ getAxiosConfig()ì˜ ì°¨ì´ì ì¼ê²ë‹ˆë‹¤(ê·¼ë° ì‚¬ì‹¤ ì„¤ëª…í–ˆìŒ).

í•¨ìˆ˜ë¥¼ ì´ë¦„ë§Œìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ í•¨ìˆ˜ëª…()ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì˜ ì°¨ì´ì ì€ ì•ìœ¼ë¡œë„ ì—¬ëŸ¬ë¶„ë“¤ì—ê²Œ ë§ì€ ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ ê¼­ ê²€ìƒ‰í•´ë³´ì‹œê³  í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

# ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ

1. Login.tsxì— Snackbar ì»´í¬ë„ŒíŠ¸ë¥¼ import
2. open ìƒíƒœ ì •ì˜
3. í”„ë¡­ ì¢…ë¥˜
  - open
  - autoHideDuration -> ë°€ë¦¬ì´ˆ ë‹¨ìœ„
  - onClose
  - message

4. ì¸ì¦ì— ì‹¤íŒ¨í•œ ê²½ìš°ì— openê°’ì„ trueë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•´ì•¼í•©ë‹ˆë‹¤.

# ë¡œê·¸ì•„ì›ƒ
ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ ë§Œë“¤ì–´ì•¼í•˜ëŠ”ë°, ì´ê±´ ê·¸ëŸ¼ ì–´ë”” ìˆì–´ì•¼í• ê¹Œìš”. -> Carlist

í˜„ì¬ ì½”ë“œ êµ¬ì¡°ìƒ
Login ì»´í¬ë„ŒíŠ¸ê°€ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ê³ 
Carlist ì»´í¬ë„ŒíŠ¸ê°€ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹í•©ë‹ˆë‹¤.

ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì€ Carlistì— ìˆì–´ì•¼ ëœë‹¤ë©´ì„œìš”
ê·¸ëŸ¬ë©´ propsë¡œ handleLogoutì„ ì „ë‹¬í•´ì¤˜ì•¼ Carlistì—ì„œ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ë¡œê·¸ì•„ì›ƒì´ ì´ë£¨ì–´ì§€ê² ë„¤ìš”.

handleLogoutì€ oê°€ ì†Œë¬¸ìì¸ë°
ë‚˜ë¨¸ì§€ logOut í˜•íƒœë¡œ ì‘ì„±í•´ë†¨ìŠµë‹ˆë‹¤.

Carlist.tsx
11, 14, 85ë²ˆ ë¼ì¸
```tsx
type CarlistProps = {
  logOut?: () => void;
}

        <Stack direction="row" alignItems="center" justifyContent="space-between">
          <AddCar />
          <Button variant="outlined" onClick={logOut}>LOG OUT</Button>
        </Stack>
```

Login.tsx
47ë²ˆ ë¼ì¸ì— í•´ë‹¹í•©ë‹ˆë‹¤.
```tsx
    return <Carlist logOut={handleLogout}/>
```

ì¼ë‹¨ ë¡œê·¸ì¸ì´ ë˜ì–´ì•¼ ë¡œê·¸ì•„ì›ƒì´ ë˜ëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì— ì €í¬ëŠ” Carlist ì»´í¬ë„ŒíŠ¸ì— ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ ë Œë”ë§ì‹œì¼°ìŠµë‹ˆë‹¤.

ê·¼ë° ì—¬ëŸ¬ í˜ì´ì§€ë¡œ êµ¬ì„±ë˜ì–´ìˆëŠ” ë³µì¡í•œ í”„ë¡ íŠ¸ì—”ë“œë¼ë©´
AppBar ì»´í¬ë„ŒíŠ¸ì— ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ ë”°ë¡œ í• ë‹¹í•´ë‘ëŠ” ê²Œ ë” í˜„ëª…í•œ ì„ íƒì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë©´ AppBarëŠ” App.tsxì— ìˆìœ¼ë‹ˆê¹Œ ê°€ì¥ ìƒìœ„ì— ìˆìœ¼ë‹ˆ App.tsxì— handleLogoutì„ êµ¬í˜„í•´ì•¼í•˜ëŠ” ê·€ì°®ì€ ì ì´ ìˆì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì´ ë“œì‹ ë‹¤ë©´ ì—¬ëŸ¬ë¶„ì´ ë¦¬ì•¡íŠ¸ë¥¼ ì œëŒ€ë¡œ ë°°ìš°ê³  ìˆëŠ” ì¤‘ì…ë‹ˆë‹¤.

ê·¸ëŸ°ë° ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” _ContextAPI_ ë¥¼ ì“°ë©´ ë˜ê² êµ° ì´ë¼ê³  ë‹µë³€ê¹Œì§€ ë– ì˜¬ë¦¬ì…¨ìœ¼ë©´ ì €í•œí…Œ ë” ì•ˆë°°ì›Œë„ ë©ë‹ˆë‹¤.

í˜¹ì€ _Recoil_ ì´ë¼ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ êµ¬í˜„í•˜ì…”ë„ ë©ë‹ˆë‹¤(ì œê°€ ì•ˆê°€ë¥´ì³¤ìŠµë‹ˆë‹¤).
ê·¼ë° ìµœê·¼ì—ëŠ” _Redux_ ê°€ ëœ¨ê³  ìˆê¸°ëŠ” í•©ë‹ˆë‹¤.

ì´ì œ ì´ê±° ë‹¤ìŒì€

ë°°í¬ì…ë‹ˆë‹¤.